<!DOCTYPE html>
<html lang="pt-BR">
<head>
  {% load static %}
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lista de Colaboradores</title>
  <link rel="icon" href="{% static 'imagens/favicon.ico' %}" type="image/x-icon">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    th.sticky {
      position: sticky;
      top: 0;
      background-color: #1f2937; /* bg-gray-800 */
      color: white;
      z-index: 10;
    }
  </style>
</head>
<body class="bg-gray-100 text-gray-800 min-h-screen px-2 pt-4">

  <div class="w-full flex flex-col min-h-[90vh]">

    <!-- T√≠tulo e bot√£o -->
<div class="flex items-center justify-between border-b pb-4 mb-6">
  <h1 class="text-2xl font-bold">üìã Lista de Colaboradores</h1>
  <div class="flex gap-2">
    <a href="{% url 'tarefas:cadastrar_colaborador' %}" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition">
      ‚ûï Novo Colaborador
    </a>
    <a href="{% url 'tarefas:home' %}" class="bg-gray-700 text-white px-4 py-2 rounded hover:bg-gray-800 transition">
      üè† Voltar √† Home
    </a>
  </div>
</div>


    <!-- Filtros -->
    <form method="get" class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 bg-white px-4 py-6 rounded shadow w-full text-base">
      <div>
        <label class="block font-semibold mb-1">Setor</label>
        <select name="setor" class="w-full border border-gray-300 rounded px-3 py-2">
          <option value="">Todos os setores</option>
          {% for setor in setores %}
            <option value="{{ setor }}" {% if filtro_setor == setor %}selected{% endif %}>{{ setor }}</option>
          {% endfor %}
        </select>
      </div>
      <div>
        <label class="block font-semibold mb-1">Status</label>
        <select name="status" class="w-full border border-gray-300 rounded px-3 py-2">
          <option value="">Todos</option>
          <option value="ativo" {% if filtro_status == "ativo" %}selected{% endif %}>Ativo</option>
          <option value="inativo" {% if filtro_status == "inativo" %}selected{% endif %}>Inativo</option>
        </select>
      </div>
      <div class="flex items-end gap-2">
        <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition w-full text-base">
          üîç Filtrar
        </button>
        <a href="{% url 'tarefas:listar_colaboradores' %}" class="bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400 transition w-full text-center text-base">
          ‚ùå Limpar
        </a>
      </div>
    </form>

    <!-- Tabela -->
    <div class="flex-grow overflow-y-auto bg-white rounded shadow max-h-[65vh] text-base">
      <table class="min-w-full table-auto text-left">
        <thead>
          <tr class="bg-gray-800 text-white">
            <th class="sticky px-4 py-3">ID</th>
            <th class="sticky px-4 py-3">Matricula</th>
            <th class="sticky px-4 py-3">Nome Completo</th>
            <th class="sticky px-4 py-3">Fun√ß√£o</th>
            <th class="sticky px-4 py-3">Setor</th>
            <th class="sticky px-4 py-3">Celular</th>
            <th class="sticky px-4 py-3">Status</th>
            <th class="sticky px-4 py-3">A√ß√µes</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-200">
          {% for colaborador in colaboradores %}
          <tr class="hover:bg-gray-50">
            <td class="px-4 py-3">{{ colaborador.id }}</td>
            <td class="px-4 py-3">{{ colaborador.matricula }}</td>
            <td class="px-4 py-3">{{ colaborador.nome_completo }}</td>
            <td class="px-4 py-3">{{ colaborador.funcao }}</td>
            <td class="px-4 py-3">{{ colaborador.setor_trabalho }}</td>
            <td class="px-4 py-3">{{ colaborador.celular }}</td>
            <td class="px-4 py-3">
              <span class="inline-flex items-center px-2 py-1 rounded text-sm font-medium
                {% if colaborador.status == 'ativo' %}
                  bg-green-100 text-green-800
                {% else %}
                  bg-red-100 text-red-800
                {% endif %}">
                {% if colaborador.status == 'ativo' %}‚úî{% else %}‚ùå{% endif %}
                &nbsp;{{ colaborador.get_status_display }}
              </span>
            </td>
            <td class="px-4 py-3">
              <a href="{% url 'tarefas:editar_colaborador' colaborador.id %}" class="bg-yellow-400 text-black px-3 py-1 rounded hover:bg-yellow-500 transition text-sm">
                ‚úèÔ∏è Editar
              </a>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="8" class="text-center py-4 text-gray-500">Nenhum colaborador encontrado.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

  </div>
</body>
</html>
